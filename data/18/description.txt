An investor has a portfolio of n different stocks. For each stock i = 1,…,n:
- s_i = number of shares purchased in the past (cost basis price p_i per share)
- p_i = purchase price per share (cost basis)
- q_i = current market price per share
- r_i = expected price per share in one year

If the investor sells shares today, two charges apply with fixed numeric rates:
- Transaction cost = 1% of the gross proceeds from the sale.
- Capital‑gains tax = 30% of the realized gain, i.e., on max(q_i − p_i, 0).

Illustrative example from the statement:
Selling 1,000 shares at $50 per share that were bought at $30 per share yields:
- Gross proceeds: 1,000 × 50 = $50,000
- Capital‑gains tax: 0.30 × (50,000 − 30,000) = $6,000
- Transaction costs: 0.01 × 50,000 = $500
- Net cash received: 50,000 − 6,000 − 500 = $43,500

Decision variables
- x_i = number of shares of stock i to sell now, with 0 ≤ x_i ≤ s_i.

Net cash raised from selling x_i shares of stock i
- net_i(x_i) = [ q_i × (1 − 0.01) − 0.30 × max(q_i − p_i, 0) ] × x_i.

Requirement (cash target)
- Raise at least K dollars after both capital‑gains taxes and transaction costs:
    Σ_{i=1}^n net_i(x_i) ≥ K.

Objective (portfolio next‑year value)
- Maximize the expected value of the remaining shares next year:
    maximize  Σ_{i=1}^n r_i × (s_i − x_i).

This is a linear program if x_i are continuous and max(q_i − p_i, 0) is precomputed per stock
(sign is known from data). Otherwise treat x_i as integers if whole shares are required.
